# Small Squaretable 用户使用指南

> SillyTavern SaaS 平台用户手册
>
> **版本**: 1.1.0
> **更新日期**: 2026-02-04

---

## 📋 目录

1. [平台介绍](#平台介绍)
2. [快速开始](#快速开始)
3. [账户管理](#账户管理)
4. [订阅计划](#订阅计划)
5. [角色管理](#角色管理)
6. [聊天功能](#聊天功能)
7. [角色市场](#角色市场)
8. [使用量管理](#使用量管理)
9. [常见问题](#常见问题)

---

## 平台介绍

### 什么是 Small Squaretable？

Small Squaretable 是一个基于 SillyTavern 的多用户 SaaS 平台，提供：

- 🤖 **AI 聊天对话** - 与多种 AI 模型进行自然对话
- 👥 **角色扮演** - 创建和使用自定义 AI 角色
- 🌐 **社区市场** - 分享和发现优质角色
- 💬 **实时聊天** - 流式响应，即时互动
- 📊 **使用量跟踪** - 清晰的配额管理

### 功能特性

| 功能 | Free | Pro | Team |
|------|------|-----|------|
| 基础聊天 | ✅ | ✅ | ✅ |
| 社区浏览 | ✅ | ✅ | ✅ |
| 消息配额 | 100/月 | 10,000/月 | 100,000/月 |
| LLM Tokens | 50K/月 | 1M/月 | 10M/月 |
| 角色分享 | ❌ | ✅ | ✅ |
| 高级模型 | ❌ | ✅ | ✅ |
| 优先支持 | ❌ | ✅ | ✅ |
| 团队协作 | ❌ | ❌ | ✅ |
| API 访问 | ❌ | ❌ | ✅ |

---

## 快速开始

### 1. 注册账户

1. 访问平台首页
2. 点击「注册」按钮
3. 填写注册信息：
   - 邮箱地址
   - 密码（至少 8 个字符）
   - 确认密码
4. 点击「创建账户」
5. 验证邮箱（如果启用）

### 2. 首次登录

1. 使用注册的邮箱和密码登录
2. 系统会自动创建 Free 计划账户
3. 您将看到欢迎页面和快速教程

### 3. 开始第一次聊天

1. 点击「新建聊天」按钮
2. 选择一个角色（或使用默认助手）
3. 在输入框中输入消息
4. 按 `Enter` 发送（`Shift+Enter` 换行）
5. 等待 AI 响应

---

## 账户管理

### 个人资料

访问「个人中心」查看和编辑：

- **基本信息**
  - 用户名
  - 邮箱地址
  - 头像

- **安全设置**
  - 修改密码
  - 登录历史
  - 会话管理

### 修改密码

1. 进入「个人中心」
2. 点击「安全设置」
3. 输入当前密码
4. 输入新密码（至少 8 个字符）
5. 确认新密码
6. 点击「保存」

### 登出

点击右上角头像 → 「登出」

---

## 订阅计划

### 计划对比

#### Free 计划（免费）

**适合**: 个人用户，轻度使用

**包含**:
- ✅ 100 条消息/月
- ✅ 50,000 LLM tokens/月
- ✅ 10 张图片/月
- ✅ 基础聊天功能
- ✅ 社区角色浏览

**限制**:
- ❌ 无法分享角色
- ❌ 无法使用高级模型
- ❌ 无优先支持

#### Pro 计划（¥99/月 或 ¥990/年）

**适合**: 专业用户，频繁使用

**包含**:
- ✅ 10,000 条消息/月
- ✅ 1,000,000 LLM tokens/月
- ✅ 500 张图片/月
- ✅ 角色分享功能
- ✅ 高级 AI 模型
- ✅ 优先客户支持
- ✅ 无广告体验

**节省**: 年付可节省 17%（相当于 2 个月免费）

#### Team 计划（¥299/月）

**适合**: 团队协作，企业使用

**包含**:
- ✅ 100,000 条消息/月
- ✅ 10,000,000 LLM tokens/月
- ✅ 5,000 张图片/月
- ✅ 1,000 次 API 调用/月
- ✅ 团队协作功能
- ✅ API 访问权限
- ✅ 自定义域名
- ✅ 专属客户经理

### 升级订阅

1. 进入「订阅管理」页面
2. 选择目标计划（Pro 或 Team）
3. 选择付款周期（月付或年付）
4. 点击「升级」按钮
5. 完成 Stripe 支付流程
6. 升级立即生效

### 管理订阅

访问「订阅管理」可以：

- 查看当前计划
- 查看使用量统计
- 升级/降级计划
- 更新付款方式
- 查看账单历史
- 取消订阅

### 取消订阅

1. 进入「订阅管理」
2. 点击「管理订阅」
3. 选择「取消订阅」
4. 确认取消

**注意**:
- 取消后，订阅将在当前计费周期结束时失效
- 您仍可使用 Pro 功能直到周期结束
- 数据不会被删除，降级为 Free 计划

---

## 角色管理

### 创建角色

1. 进入「我的角色」页面
2. 点击「创建角色」按钮
3. 填写角色信息：

   **基本信息**:
   - 角色名称（必填）
   - 角色描述
   - 头像图片
   - 分类（助手、伙伴、导师等）

   **角色设定**:
   - 人格特征
   - 背景故事
   - 对话风格
   - 示例对话

   **高级设置**:
   - 系统提示词
   - 温度参数（0-1）
   - 最大 tokens
   - 停止序列

4. 点击「保存」

### 编辑角色

1. 进入「我的角色」
2. 找到要编辑的角色
3. 点击「编辑」按钮
4. 修改角色信息
5. 点击「保存」

### 删除角色

1. 进入「我的角色」
2. 找到要删除的角色
3. 点击「删除」按钮
4. 确认删除

**注意**: 删除角色不会删除相关的聊天记录

### 发布角色（Pro/Team）

1. 编辑角色
2. 点击「发布到市场」
3. 填写发布信息：
   - 公开描述
   - 标签（最多 5 个）
   - 是否标记为 NSFW
4. 点击「发布」

**发布要求**:
- 需要 Pro 或 Team 订阅
- 角色信息完整
- 符合社区准则

### 取消发布

1. 进入「我的角色」
2. 找到已发布的角色
3. 点击「取消发布」
4. 确认操作

---

## 聊天功能

### 创建新聊天

1. 点击左侧边栏的「新建聊天」按钮
2. 选择角色：
   - 从「我的角色」选择
   - 从「社区角色」选择
   - 使用默认助手
3. 聊天窗口自动打开

### 发送消息

**方式 1: 键盘**
- 输入消息
- 按 `Enter` 发送
- 按 `Shift+Enter` 换行

**方式 2: 鼠标**
- 输入消息
- 点击「发送」按钮

### 消息功能

**复制消息**:
- 鼠标悬停在消息上
- 点击「复制」图标

**查看时间**:
- 消息下方显示相对时间（如「5分钟前」）

**Markdown 支持**:
AI 响应支持 Markdown 格式：
- **粗体**、*斜体*
- 代码块
- 列表
- 引用

### 聊天管理

**重命名聊天**:
1. 右键点击聊天
2. 选择「重命名」
3. 输入新名称
4. 按 `Enter` 确认

**删除聊天**:
1. 右键点击聊天
2. 选择「删除」
3. 确认删除

**搜索聊天**:
- 在侧边栏顶部的搜索框输入关键词
- 实时过滤聊天列表

### 实时响应

AI 响应采用流式传输：
- 逐字显示，无需等待完整响应
- 可以随时停止生成
- 显示「正在输入...」指示器

### 聊天历史

- 所有聊天自动保存
- 可随时查看历史消息
- 支持无限滚动加载

---

## 角色市场

### 浏览市场

1. 进入「角色市场」页面
2. 浏览推荐角色
3. 使用筛选器：
   - 分类（助手、伙伴、导师等）
   - 标签
   - NSFW 过滤

### 搜索角色

1. 在搜索框输入关键词
2. 按 `Enter` 搜索
3. 查看搜索结果

### 排序选项

- **热门** - 按下载量排序
- **最新** - 按发布时间排序
- **评分最高** - 按平均评分排序
- **相关性** - 按搜索相关性排序（搜索时）

### 查看角色详情

1. 点击角色卡片
2. 查看详细信息：
   - 角色描述
   - 创建者信息
   - 评分和评论
   - 下载次数
   - 标签

### 使用社区角色

**方式 1: 直接聊天**
1. 在角色详情页
2. 点击「开始聊天」
3. 自动创建新聊天

**方式 2: 导入角色**
1. 在角色详情页
2. 点击「导入」
3. 角色添加到「我的角色」
4. 可以编辑和自定义

### 评分和评论（Pro/Team）

**评分维度**:
- 质量（1-5 星）
- 创意（1-5 星）
- 互动性（1-5 星）
- 准确性（1-5 星）
- 娱乐性（1-5 星）

**提交评分**:
1. 在角色详情页
2. 点击「评分」按钮
3. 为每个维度打分
4. 可选：添加文字评论
5. 点击「提交」

### 导出角色

1. 在角色详情页
2. 点击「导出」按钮
3. 下载 JSON 文件（SillyTavern 格式）

**用途**:
- 备份角色
- 在其他平台使用
- 与朋友分享

### 导入角色

1. 进入「我的角色」
2. 点击「导入」按钮
3. 选择 JSON 文件
4. 角色自动添加

**支持格式**:
- SillyTavern 标准格式
- Small Squaretable 格式

---

## 使用量管理

### 查看使用量

访问「使用量统计」页面查看：

**实时统计**:
- 消息数使用情况
- LLM tokens 使用情况
- 图片数使用情况
- API 调用数（Team 计划）

**可视化展示**:
- 进度条显示使用百分比
- 颜色指示：
  - 绿色：< 50%
  - 黄色：50-80%
  - 橙色：80-90%
  - 红色：> 90%

### 配额警告

**80% 警告**:
- 使用量达到 80% 时显示警告
- 建议升级或等待下月重置

**100% 限制**:
- 达到配额后无法继续使用
- 显示升级提示
- 可以升级订阅立即解除限制

### 配额重置

- **重置时间**: 每月 1 日 00:00 UTC
- **自动重置**: 无需手动操作
- **即时生效**: 重置后立即可用

### 历史数据

查看过去 12 个月的使用量：
- 按月统计
- 趋势图表
- 导出 CSV

---

## 常见问题

### 账户相关

**Q: 忘记密码怎么办？**

A:
1. 点击登录页面的「忘记密码」
2. 输入注册邮箱
3. 查收重置密码邮件
4. 点击邮件中的链接
5. 设置新密码

**Q: 如何修改邮箱地址？**

A: 目前不支持直接修改邮箱，请联系客服协助。

**Q: 可以删除账户吗？**

A: 可以。进入「个人中心」→「账户设置」→「删除账户」。注意：此操作不可恢复。

**Q: 登录时提示 Token 过期怎么办？**

A: 系统会自动刷新 Token。如果仍然提示过期，请尝试重新登录。Access Token 有效期为 7 天，Refresh Token 有效期为 30 天。

**Q: 如何启用双因素认证？**

A: 目前暂不支持双因素认证，此功能正在开发中。

### 订阅相关

**Q: 升级后立即生效吗？**

A: 是的，升级后立即生效，配额立即更新。

**Q: 降级会丢失数据吗？**

A: 不会。所有数据保留，但某些功能可能受限。

**Q: 可以退款吗？**

A: 根据退款政策，订阅后 7 天内可申请全额退款。

**Q: 年付可以中途取消吗？**

A: 可以取消，但不会按比例退款。订阅将在年度周期结束时失效。

**Q: 如何查看我的订阅状态？**

A: 进入「订阅管理」页面，可以查看当前计划、使用量、到期时间等信息。

**Q: 支持哪些支付方式？**

A: 通过 Stripe 支持：
- 信用卡/借记卡（Visa、MasterCard、American Express）
- Apple Pay
- Google Pay
- 支付宝（部分地区）

### 聊天相关

**Q: 为什么 AI 响应很慢？**

A: 可能原因：
- 网络连接不稳定
- 服务器负载较高
- 使用的模型较大
- 消息内容过长

**Q: 可以删除单条消息吗？**

A: 目前不支持删除单条消息，只能删除整个聊天。

**Q: 聊天记录会保存多久？**

A: 永久保存，除非您主动删除。

**Q: 可以导出聊天记录吗？**

A: 目前不支持，此功能正在开发中。

**Q: WebSocket 连接断开怎么办？**

A: 系统会自动尝试重连。如果持续断开，请检查网络连接或刷新页面。

**Q: 如何停止 AI 正在生成的回复？**

A: 在 AI 回复过程中，点击「停止生成」按钮即可中断。

### 角色相关

**Q: 创建角色有数量限制吗？**

A:
- Free: 最多 5 个私有角色
- Pro: 最多 50 个私有角色
- Team: 无限制

**Q: 发布的角色可以修改吗？**

A: 可以。修改后需要重新发布，更新会立即生效。

**Q: 如何举报不当角色？**

A: 在角色详情页点击「举报」按钮，选择举报原因并提交。

**Q: 什么是角色卡片（Character Card）？**

A: 角色卡片是 SillyTavern 标准格式，包含角色的名称、描述、人格设定、示例对话等信息。支持导入导出 JSON 格式。

**Q: 如何提高角色的评分？**

A: 评分基于五个维度：质量、创意、互动性、准确性、娱乐性。建议：
- 完善角色描述和背景故事
- 提供高质量的示例对话
- 设置合适的人格特征
- 使用恰当的标签分类

### 技术相关

**Q: 支持哪些浏览器？**

A:
- Chrome/Edge（推荐）
- Firefox
- Safari
- 需要启用 JavaScript 和 WebSocket

**Q: 移动端可以使用吗？**

A: 可以。网页版支持响应式设计，移动端浏览器可正常使用。

**Q: 支持 API 访问吗？**

A: Team 计划提供 API 访问。查看 [API 文档](docs/api/openapi.yaml) 了解详情。

**Q: 如何查看 API 文档？**

A: API 文档采用 OpenAPI 3.1 规范，位于 `docs/api/openapi.yaml`。可以使用 Swagger UI 或其他 OpenAPI 工具查看。

**Q: 健康检查端点有哪些？**

A: 提供三个健康检查端点：
- `/health` - 基础健康检查
- `/health/live` - 存活检查（Kubernetes liveness probe）
- `/health/ready` - 就绪检查（检查数据库和 Redis 连接）

### 计费相关

**Q: 如何查看账单？**

A: 进入「订阅管理」→「账单历史」查看所有账单。

**Q: 发票如何获取？**

A: 每次付款后会自动发送电子发票到注册邮箱。

**Q: 配额什么时候重置？**

A: 每月 1 日 00:00 UTC 自动重置。

**Q: 超出配额后会怎样？**

A: 超出配额后，相关功能将被限制，直到下月重置或升级订阅。系统会在使用量达到 80% 时发出警告。

### 数据安全

**Q: 我的数据安全吗？**

A: 是的。我们采取以下安全措施：
- 所有数据传输使用 HTTPS 加密
- 密码使用 bcrypt 加密存储
- JWT Token 签名验证
- 多租户数据隔离
- 定期安全审计

**Q: 数据存储在哪里？**

A: 数据存储在安全的云服务器上，使用 PostgreSQL 数据库和 Redis 缓存。

**Q: 如何备份我的数据？**

A: 目前不支持用户自助备份。如需数据导出，请联系客服。

---

## 使用技巧

### 1. 优化角色设定

**好的角色设定**:
```
你是一位经验丰富的 Python 编程导师，擅长用简单易懂的方式
解释复杂概念。你总是先询问学生的背景，然后根据他们的水平
调整教学方式。你喜欢用实际例子和类比来帮助理解。
```

**避免**:
```
你是一个助手。
```

### 2. 有效的提示词

**具体明确**:
- ✅ "用 Python 写一个冒泡排序算法，并解释每一步"
- ❌ "写个排序"

**提供上下文**:
- ✅ "我是初学者，请用简单的语言解释什么是递归"
- ❌ "什么是递归"

### 3. 管理配额

**节省配额**:
- 使用简洁的提示词
- 避免重复相同的问题
- 合理使用温度参数（较低的温度消耗更少）

**监控使用**:
- 定期查看使用量统计
- 在接近限制时考虑升级

### 4. 角色分类

建议按用途分类角色：
- 📚 学习助手
- 💼 工作助手
- 🎮 娱乐角色
- 🎨 创意伙伴

### 5. 搜索技巧

**使用标签**:
- 点击标签快速筛选
- 组合多个标签精确查找

**关键词搜索**:
- 使用具体的关键词
- 尝试不同的表达方式

---

## 社区准则

### 禁止内容

- ❌ 暴力、仇恨言论
- ❌ 非法内容
- ❌ 侵犯版权
- ❌ 个人信息泄露
- ❌ 垃圾信息

### 鼓励内容

- ✅ 有创意的角色设定
- ✅ 有用的助手角色
- ✅ 教育性内容
- ✅ 建设性的评论

### 举报机制

发现违规内容请立即举报：
1. 点击「举报」按钮
2. 选择违规类型
3. 提供详细说明
4. 提交举报

我们会在 24 小时内处理。

---

## 获取帮助

### 帮助中心

访问「帮助中心」查找：
- 使用教程
- 视频指南
- 常见问题解答

### 联系支持

**Pro/Team 用户**:
- 优先邮件支持
- 24 小时响应时间

**Free 用户**:
- 社区论坛
- 邮件支持（48 小时响应）

### 反馈建议

我们欢迎您的反馈：
- 功能建议
- Bug 报告
- 使用体验

通过「反馈」按钮提交。

---

## 更新日志

### v1.1.0 (2026-02-04)

**新功能**:
- 角色市场三段式控制台布局重设计
- 增强的搜索功能（全文搜索、标签过滤）
- 五维度评分系统（质量、创意、互动性、准确性、娱乐性）
- WebSocket 实时聊天优化
- 健康检查端点（/health, /health/live, /health/ready）

**改进**:
- 优化 API 响应格式
- 增强缓存机制（Redis 缓存市场和搜索结果）
- 改进错误处理和提示信息
- 移动端响应式布局优化

**修复**:
- 修复认证 Token 刷新问题
- 修复角色发布权限检查
- 修复使用量统计计算

### v1.0.0 (2026-02-01)

**新功能**:
- ✨ 实时聊天系统
- ✨ 角色市场
- ✨ 订阅系统
- ✨ 使用量跟踪

**改进**:
- 🚀 优化响应速度
- 🎨 改进用户界面
- 📱 移动端适配

---

**版本**: 1.0.0
**最后更新**: 2026-02-01
**平台**: Small Squaretable
