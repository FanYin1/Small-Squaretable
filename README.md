# Small Squaretable

> SillyTavern SaaS è½¬æ¢é¡¹ç›® - ä¼ä¸šçº§å¤šç§Ÿæˆ·å¹³å° ğŸš€

## é¡¹ç›®æ¦‚è¿°

å°† SillyTavern (å•ç”¨æˆ· LLM å‰ç«¯) è½¬æ¢ä¸ºä¼ä¸šçº§å¤šç§Ÿæˆ· SaaS å¹³å°ï¼Œæ”¯æŒè®¢é˜…è®¡è´¹ã€è§’è‰²å¸‚åœºã€å®æ—¶èŠå¤©ç­‰åŠŸèƒ½ã€‚

**å½“å‰é˜¶æ®µ**: Phase 7 å·²å®Œæˆ - ç”Ÿäº§å°±ç»ª
**æ•´ä½“å®Œæˆåº¦**: 100%
**ç‰ˆæœ¬**: 0.1.0
**æœ€åæ›´æ–°**: 2026-02-05

## ğŸ¯ é¡¹ç›®çŠ¶æ€

```
Phase 1: åŸºç¡€è®¾æ–½å±‚        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
Phase 2: æ ¸å¿ƒ API          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
Phase 3: è®¢é˜…ä¸è®¡è´¹        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
Phase 4: å‰ç«¯åŸºç¡€          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
Phase 5: å‰ç«¯é¡µé¢å¼€å‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
Phase 6: æµ‹è¯•ä¸ä¼˜åŒ–        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
Phase 7: ç”Ÿäº§éƒ¨ç½²          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ…
```

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ¢ **å¤šç§Ÿæˆ·æ¶æ„** - å®Œæ•´çš„ç§Ÿæˆ·éš”ç¦»å’Œæ•°æ®å®‰å…¨
- ğŸ’³ **è®¢é˜…ç³»ç»Ÿ** - åŸºäº Stripe çš„ä¸‰å±‚è®¢é˜…è®¡åˆ’ (Free/Pro/Team)
- ğŸ” **è®¤è¯ç³»ç»Ÿ** - JWT åŒ Token æœºåˆ¶ + CSRF é˜²æŠ¤
- ğŸ’¬ **å®æ—¶èŠå¤©** - WebSocket + LLM æµå¼å“åº”
- ğŸ‘¥ **è§’è‰²å¸‚åœº** - ç¤¾åŒºåˆ†äº«ã€äº”ç»´åº¦è¯„åˆ†ç³»ç»Ÿ
- ğŸ” **å…¨æ–‡æœç´¢** - PostgreSQL tsvector å…¨æ–‡æœç´¢
- ğŸ“¦ **SillyTavern V2** - æ”¯æŒ V2 æ ¼å¼è§’è‰²å¡å¯¼å…¥

### æŠ€æœ¯ç‰¹æ€§
- ğŸ—„ï¸ **æ•°æ®åº“**: PostgreSQL + Drizzle ORM
- âš¡ **ç¼“å­˜**: Redis é«˜æ€§èƒ½ç¼“å­˜
- ğŸ”’ **å®‰å…¨**: CSRFã€CSPã€é€Ÿç‡é™åˆ¶ã€è¾“å…¥éªŒè¯
- ğŸ“Š **ç›‘æ§**: Sentry é”™è¯¯è¿½è¸ªã€ç»“æ„åŒ–æ—¥å¿—
- ğŸ§ª **æµ‹è¯•**: 99% å•å…ƒæµ‹è¯•é€šè¿‡ç‡
- ğŸ³ **éƒ¨ç½²**: Docker + Kubernetes + CI/CD

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| å‰ç«¯ | Vue 3 + Vite + TypeScript + Element Plus |
| åç«¯ | Hono.js + Node.js |
| æ•°æ®åº“ | PostgreSQL + Drizzle ORM |
| ç¼“å­˜ | Redis |
| è®¤è¯ | JWT (Access + Refresh Token) |
| æ”¯ä»˜ | Stripe |
| æµ‹è¯• | Vitest + Playwright |

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 20.0.0
- PostgreSQL >= 15
- Redis >= 7

### å®‰è£…æ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/FanYin1/Small-Squaretable.git
cd Small-Squaretable

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# å¯åŠ¨æ•°æ®åº“å’Œ Redis (Docker)
docker run -d --name postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=sillytavern_saas -p 5432:5432 postgres:15
docker run -d --name redis -p 6379:6379 redis:7

# è¿è¡Œæ•°æ®åº“è¿ç§»
npm run db:migrate

# å¯åŠ¨åç«¯æœåŠ¡å™¨
npm run dev

# å¯åŠ¨å‰ç«¯æœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run dev:client
```

### è®¿é—®åº”ç”¨
- å‰ç«¯: http://localhost:5173
- åç«¯ API: http://localhost:3000/api/v1
- å¥åº·æ£€æŸ¥: http://localhost:3000/health

## å¸¸ç”¨å‘½ä»¤

```bash
npm run dev              # å¯åŠ¨åç«¯ (ç«¯å£ 3000)
npm run dev:client       # å¯åŠ¨å‰ç«¯ (ç«¯å£ 5173)
npm run build            # ç”Ÿäº§æ„å»º
npm run test             # è¿è¡Œå•å…ƒæµ‹è¯•
npx playwright test      # è¿è¡Œ E2E æµ‹è¯•
npm run db:studio        # æ‰“å¼€æ•°æ®åº“ç®¡ç†ç•Œé¢
npm run lint             # ä»£ç æ£€æŸ¥
```

## é¡¹ç›®ç»“æ„

```
Small-Squaretable/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ client/          # Vue 3 å‰ç«¯
â”‚   â”‚   â”œâ”€â”€ components/  # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/       # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/      # Pinia çŠ¶æ€
â”‚   â”‚   â””â”€â”€ services/    # API æœåŠ¡
â”‚   â”œâ”€â”€ server/          # Hono.js åç«¯
â”‚   â”‚   â”œâ”€â”€ routes/      # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/    # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ middleware/  # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ db/              # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ schema/      # Drizzle Schema
â”‚   â”‚   â””â”€â”€ migrations/  # è¿ç§»æ–‡ä»¶
â”‚   â””â”€â”€ types/           # TypeScript ç±»å‹
â”œâ”€â”€ e2e/                 # Playwright E2E æµ‹è¯•
â”œâ”€â”€ k8s/                 # Kubernetes é…ç½®
â”œâ”€â”€ docs/                # æ–‡æ¡£
â””â”€â”€ scripts/             # å·¥å…·è„šæœ¬
```

## ğŸ“š æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [ROADMAP.md](ROADMAP.md) | å¼€å‘è·¯çº¿å›¾ |
| [USER_GUIDE.md](USER_GUIDE.md) | ç”¨æˆ·ä½¿ç”¨æŒ‡å— |
| [API_USAGE_GUIDE.md](API_USAGE_GUIDE.md) | API æ¥å£æ–‡æ¡£ |
| [CONTRIBUTING.md](CONTRIBUTING.md) | è´¡çŒ®æŒ‡å— |
| [OPERATIONS_MANUAL.md](OPERATIONS_MANUAL.md) | è¿ç»´æ‰‹å†Œ |
| [docs/deployment/](docs/deployment/) | éƒ¨ç½²æ–‡æ¡£ |
| [docs/api/openapi.yaml](docs/api/openapi.yaml) | OpenAPI è§„èŒƒ |

## ç”Ÿäº§éƒ¨ç½²

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
./scripts/docker-build.sh -e prod --scan

# è¿è¡Œå®¹å™¨
docker-compose up -d
```

### Kubernetes éƒ¨ç½²

```bash
# éƒ¨ç½²åˆ° K8s
./scripts/deploy-k8s.sh -k -e production

# æŸ¥çœ‹çŠ¶æ€
kubectl get pods -n small-squaretable
```

è¯¦ç»†éƒ¨ç½²è¯´æ˜è¯·å‚è€ƒ [éƒ¨ç½²æŒ‡å—](docs/deployment/deployment-guide.md)ã€‚

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼è¯·å…ˆé˜…è¯» [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ã€‚
